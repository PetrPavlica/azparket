(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=(n(94),n(53)),c=n(84),l=n(34),v=n(35),u=n(40),d=n(36),b=n(8),p=n(41),g=n(52),h=n(39),E=n.n(h),w=(n(97),n(88)),y=n.n(w),f=n(51),m=n.n(f),O=(n(211),{allDay:"Cel\xfd den",previous:"P\u0159edchoz\xed",next:"Dal\u0161\xed",refresh:"Obnovit",today:"Dnes",month:"M\u011bs\xedc",week:"T\xfdden",work_week:"5 dn\xed",day:"Den",agenda:"Agenda",date:"Datum",time:"\u010cas",event:"N\xe1v\u0161t\u011bva",noEventsInRange:"\u017d\xe1dn\xe9 n\xe1v\u0161t\u011bvy",showMore:function(e){return"+ Zobrazit dal\u0161\xed (".concat(e,")")}}),k=n(23),j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).navigate=function(e){n.props.onNavigate(e)},n.view=function(e){n.props.onView(e)},n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,n=e.label;return i.a.createElement("div",{className:"rbc-toolbar"},i.a.createElement("span",{className:"rbc-btn-group"},i.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,k.navigate.TODAY)},t.today),i.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,k.navigate.PREVIOUS)},t.previous),i.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,k.navigate.NEXT)},t.next),i.a.createElement("button",{type:"button",style:{marginLeft:"30px"},onClick:this.navigate.bind(null,"REFRESH")},t.refresh)),i.a.createElement("span",{className:"rbc-toolbar-label"},n),i.a.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,n=this.props.views,a=this.props.view;if(n.length>1)return n.map(function(n){return i.a.createElement("button",{type:"button",key:n,className:a===n?"rbc-active":"",onClick:t.view.bind(null,n)},e[n])})}}]),t}(a.Component);n(212),n(213);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}E.a.locale("cs");var V=Object(g.b)(E.a),N=y()(g.a),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={events:[],test:[],type:document.getElementById("calendar-type-help").innerText},n.moveEvent=n.moveEvent.bind(Object(b.a)(n)),n.newEvent=n.newEvent.bind(Object(b.a)(n)),n.newEventVisit=n.newEventVisit.bind(Object(b.a)(n)),n.editEvent=n.editEvent.bind(Object(b.a)(n)),n.editEventVisit=n.editEventVisit.bind(Object(b.a)(n)),n.editEventExternServiceVisit=n.editEventExternServiceVisit.bind(Object(b.a)(n)),n.resizeEvent=n.resizeEvent.bind(Object(b.a)(n)),n.changeView=n.changeView.bind(Object(b.a)(n)),n.changeNavigate=n.changeNavigate.bind(Object(b.a)(n)),n}return Object(p.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.GetEvents(!1)}},{key:"componentDidUpdate",value:function(e,t){console.log(t)}},{key:"GetEvents",value:function(e){var t=this;m.a.post(BASEURL+"/api/event/get-events",{type:t.state.type}).then(function(e){var n=[],a=e.data.success.events;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];n[o.id]={id:o.id,title:o.title,start:new Date(o.y,o.m,o.d,o.sh,o.sm),end:new Date(o.y,o.m,o.d,o.eh,o.em),color:o.color,desc:o.desc}}t.setState({events:n})}).catch(function(e){console.log(e)})}},{key:"ChangeEvent",value:function(e){m.a.post(BASEURL+"/api/event/change-event",{id:e.id,y:e.start.getFullYear(),m:e.start.getMonth()+1,d:e.start.getDate(),sh:e.start.getHours(),sm:e.start.getMinutes(),eh:e.end.getHours(),em:e.end.getMinutes(),type:this.state.type}).then(function(e){e.data.success&&(console.log("DONE"),console.log(e.data.success))}).catch(function(e){console.log(e)})}},{key:"changeView",value:function(e){}},{key:"changeNavigate",value:function(e,t,n){console.log(n,t),"REFRESH"===n&&this.GetEvents("day"===t)}},{key:"moveEvent",value:function(e){var t=e.event,n=e.start,a=e.end,i=this.state.events,o=i.indexOf(t),s=S({},t,{start:n,end:a,allDay:!1}),c=Object(r.a)(i);c.splice(o,1,s),this.ChangeEvent(s),this.setState({events:c}),console.log(t),console.log(n,a)}},{key:"resizeEvent",value:function(e){var t=e.event,n=e.start,a=e.end,i=this.state.events,o=i.indexOf(t),s=S({},t,{start:n,end:a}),c=Object(r.a)(i);c.splice(o,1,s),this.ChangeEvent(s),this.setState({events:c}),console.log(t),console.log(n,a)}},{key:"editEvent",value:function(e){window.open(BASEURL+"/intra/worker-tender/edit/"+e.id,"_blank").focus()}},{key:"editEventVisit",value:function(e){window.open(BASEURL+"/intra/visit/edit/"+e.id,"_blank").focus()}},{key:"editEventExternServiceVisit",value:function(e){window.open(BASEURL+"/intra/extern-service-visit/edit/"+e.id,"_blank").focus()}},{key:"newEvent",value:function(e){console.log(e)}},{key:"newEventVisit",value:function(e){console.log(e);var t=e.start.getDay(),n=e.start.getMonth()+1,a=e.start.getDate(),i=e.start.getFullYear()+"-"+(n>9?"":"0")+n+"-"+(a>9?"":"0")+a,o=e.start.getMinutes(),s=e.start.getHours()+":"+(o>9?"":"0")+o,r=e.end.getMinutes(),c=e.end.getHours()+":"+(r>9?"":"0")+r;window.open(BASEURL+"/intra/visit/edit?day="+t+"&start="+s+"&end="+c+"&ymd="+i,"_blank").focus()}},{key:"render",value:function(){var e=parseInt(this.state.type);return i.a.createElement("div",{className:"App"},i.a.createElement(N,{defaultDate:new Date,defaultView:0===e?"day":"work_week",views:["week","work_week","day","agenda"],selectable:!0,step:0===e||2===e?30:5,length:30,timeslots:0===e?2:12,min:0===e||2===e?new Date((new Date).setHours(0,0)):new Date((new Date).setHours(6,0)),max:0===e||2===e?new Date((new Date).setHours(23,0)):new Date((new Date).setHours(17,0)),localizer:V,events:this.state.events,eventPropGetter:function(e){return{style:{backgroundColor:e.color}}},dayLayoutAlgorithm:"no-overlap",messages:O,onEventDrop:this.moveEvent,resizable:!0,onEventResize:this.resizeEvent,onSelectSlot:0===e?this.newEventVisit:this.newEvent,onDoubleClickEvent:0===e?this.editEventVisit:2===e?this.editEventExternServiceVisit:this.editEvent,onView:this.changeView,onNavigate:this.changeNavigate,onDragStart:console.log,style:{height:"100vh"},components:{toolbar:j}}))}}]),t}(a.Component);s.a.render(i.a.createElement(x,null),document.getElementById("root"))},89:function(e,t,n){e.exports=n(214)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.483467a8.chunk.js.map